PopnupBlog Pop'n'Up Document
--------------------------------------------------------------------------------
Module Name  : PopnupBlog
Auther       : Yoshi.Sakai ( info@bluemooninc.biz )
Company      : Bluemoon inc. ( http://www.bluemooninc.biz )
Start date   : 08,Mar,2004
License under: GPL 2.0
--------------------------------------------------------------------------------
Based By : SimpleBLOG V0.2.1RC2. http://sourceforge.jp/projects/xoops-modules/
--------------------------------------------------------------------------------******************
（寄付のお願い）
******************
　弊社のオープンソースは皆様の寄付と有償サポートにより運営されています。このサイトにあるオープンソースが気に入りましたら是非寄付をお願いします。 貴方の寄付はオープンソースのメンテナンスや開発のために役立てられます。また、その一部は kiva.org を通して世界の貧困を撲滅する活動に役立てられます。 

******************
ライセンスについて
******************
本製品は GPLライセンス(http://www.opensource.jp/gpl/gpl.ja.html)に基づくフリーウ
ェアで、無保証を条件に誰でも自由に使用する事ができます。尚、本製品は皆様のご好意
による寄付により成り立っています。企業でご利用の場合は、ソフトウェア代金として領
収証を発行いたします。また、有償サポート・カスタマイズも行っておりますので、御用
の際は有限会社ブルームーン( webmaster@bluemooninc.biz )までご連絡ください。

******************
アップデート情報
******************
readme.txtを参照ください。

ご注意）Version 2.1/2.2/2.3/2.4 はそれぞれテーブル構造が異なります。アップデートの際は XOOPS_URL/modules/popnupblog/admin/sqlupdate????.php を1度だけ実行下さい。(????はreadme.txtを参照ください。)

Version 1.xx と Version2.xx はテーブル構造が異なります。アップデートの際
はreadme.txt の「Update v1.xx to v2.00」に記載されている作業が必要です。

******
ご紹介
******
PopnupBlog は XOOPS2 で動作するブログ・モジュールです。このブログを使用すると、
添付/画像ファイルの自動貼付（サムネール付）・メールからの添付ファイル付き投稿・
時刻管理により日に何度も投稿といった事が可能になります。

Bluemoon.Multi-Survey と組み合わせると、写真付きのあらゆる調査報告書（アンケート・施工管理・生産管理・デジタルカルテ等々）に応用できます。

******************
インストール方法
******************

1.モジュールの解凍

　(XOOPS_ROOT./module)にZIPファイルを解凍します。
　アップデートにつきましては popnup_eng.txt を参照ください。

2.インストール

　管理者メニューのモジュール管理よりインストールを実行します。

　BLOGの管理メニューよりユーザーを登録します。メールからの投稿を受け付ける場合は投稿用メールアドレスを登録します。

3.サムネールフォルダの作成

　サムネール保存用のフォルダを作成してください。通常アップロードフォルダの中に
作成することを推奨します。(XOOPS_ROOT./uploads/thumbs)

　尚。サムネールの作成にはGDライブラリのサポートが必要です。

4.メール受信ファイルの動作設定

4-0.モジュール一般設定

システム管理よりPopnupBlogのモジュール・アイコンにマウスを移動すると一般設定が表示されます。

添付ファイル名称コードはマルチバイトファイル名を保管する時の文字列変換コードを指定します。
メール・サーバはBOLG投稿者からの着信メールを受け取るメールサーバを登録します。
メール・ユーザーはメールサーバの受信者ＩＤを設定します。
メール・パスワードはメールサーバの受信者パスワードを設定します。
メール・アドレスは受信メールアドレスを設定します。

4-1.動作設定について

pop.ini.phpは各セクション毎に設定が別れています。

4-1-1.POP server section

投稿者は指定のメールアドレスにメールを送信します。
プログラムはそのメールアドレスからメールを受信します。
POP server section はメール受信する為の設定を行うセクションです。

$limit_min は前回受信時刻より何分以上経過していれば再度受信処理を行うかを設定します。メインメニューをユーザーが表示する度にこの経過時間を元にメール受信が行われます。
$JUST_POPED メール受信プログラム'pop.php'を直接実行した場合の受信完了メッセージです。

4-1-2.Mail Ctrl section

メールを受信するとログが発生します。また、拒絶したいメールの設定なども可能です。

$log_dir はログを記録するフォルダの設定です。
$log は成功したメールのログファイルを設定します。
$denylog は拒絶したメールのログファイルを設定します。
$denylog_save は拒絶メールのログを保存するかどうかの設定です。
$head_save は成功したメールのヘッダ情報を保存するかどうかの設定です。
$head_prefix は成功したメールのヘッダ情報を保存する場合のファイル名の接頭文字を設定します。
$maxline はログファイルの最大行数を設定します。
$guestpost_uid ゲストの投稿を登録済みＵＩＤのブログへ保存します。（NULLで禁止）
$guestpost_uname ゲスト投稿の添付ファイルの接頭文字列を設定します。
$nosubject はタイトルの無いメールを受信したときに自動添付するタイトルです。

4-1-3.Attached file section

添付ファイルの設定を行います。

$BlogCNF['uploads'] 添付ファイル保管用フォルダを指定します。ウェブパスの通っていないフォルダに変えるとより安全です。
$BlogCNF['thumb_dir'] はサムネール用のフォルダを指定します。
$BlogCNF['img_dir'] は画像ファイル用のフォルダを指定します。
$BlogCNF['subtype'] は受け付けるMIMEタイプを登録します。
$BlogCNF['imgtype'] はイメージファイルとしてURL自動添付を行う対象のMIMEを登録します。
$BlogCNF['viri'] は添付禁止のファイル拡張子を設定します。
$BlogCNF['w']は自動サムネールを作成する画像ファイルの横幅を指定します。
$BlogCNF['h'] は自動サムネールを作成する画像ファイルの高さを指定します。
$BlogCNF['thumb_ext'] は自動サムネールを作成する画像ファイルの拡張子を指定します。(Jpg,Png)
$BlogCNF['gd_ver'] はPHPのGDライブラリのバージョン指定を行います。
$BlogCNF['maxbyte']  は添付ファイルの最大容量を指定します。

4-1-4.Deny section

$imgonly は添付ファイル無しの場合は保存しません。( 1=保存しない / 0=保存する)
$BlogCNF['post_limit'] はメールからの投稿可能最大文字列を設定します。
$BlogCNF['text_limit'] は最近の投稿ブロックに表示するブログの最大文字列を設定します。（０でタイトルのみ）
$deny は投稿禁止のメールアドレスを登録します。主にウィルスメールからの防御用です。
$deny_mailer は投稿禁止のメーラーを登録します。主に自動メール配付ソフトからの防御用です。
$deny_title は投稿禁止のメールタイトルを登録します。主にスパムメールからの防御用です。
$deny_lang は投稿禁止のキャラクタコードを登録します。主に投稿言語を絞りたい場合に使用します。
$del_ereg は同じ文字が連続する場合カットする指定を登録します。主に連続するアンダーバー等を除去します。
$word[] はメールのボディから除去したい文字列を登録します。配列変数なので複数行登録できます。
